// Blood Frontier: Default Configuration

exec "keymap.cfg"
exec "engine.cfg"
exec "brush.cfg"
exec "menus.cfg"
exec "sounds.cfg"

loadcrosshair "textures/crosshair.png" 0
loadcrosshair "textures/crosshair_team.png" 1
loadcrosshair "textures/crosshair_hit.png" 2
loadcrosshair "textures/crosshair_zoom.png" 3

name "unnamed"
team "none"

// Game Aliases
// Modes (single integer):
//		0		Demo
//		1		Edit
//		2		Singleplayer
//		3		Deathmatch
//		4		Base Capture
//		5		Assassin
//		4		Capture the Flag
// Mutators (bitwise and):
//		0x0001	Team
//		0x0002	Instagib
//		0x0004	Duel
//		0x0008	Link

mapcomplete				= [ complete $arg1 maps bgz ]
start					= [ mode $arg1 $arg2; map $arg3 ]; mapcomplete start

demo					= [ stopdemo; start 0 0x00 $arg1 ]; complete demo . dmo

edit					= [ start 1 0x0000 $arg1 ]; mapcomplete edit
singleplayer			= [ start 2 0x0000 $arg1 ]; mapcomplete singleplayer

deathmatch				= [ start 3 0x0000 $arg1 ]; mapcomplete deathmatch
teamdm					= [ start 3 0x0001 $arg1 ]; mapcomplete teamdm
instadm					= [ start 3 0x0002 $arg1 ]; mapcomplete instadm
teaminstadm				= [ start 3 0x0003 $arg1 ]; mapcomplete teaminstadm
dueldm					= [ start 3 0x0004 $arg1 ]; mapcomplete dueldm
teamdueldm				= [ start 3 0x0005 $arg1 ]; mapcomplete teamdueldm
instadueldm				= [ start 3 0x0006 $arg1 ]; mapcomplete instadueldm
teaminstadueldm			= [ start 3 0x0007 $arg1 ]; mapcomplete teaminstadueldm

capture					= [ start 4 0x0001 $arg1 ]; mapcomplete capture
instacapture			= [ start 4 0x0003 $arg1 ]; mapcomplete instacapture
linkcapture				= [ start 4 0x0008 $arg1 ]; mapcomplete linkcapture
instalinkcapture		= [ start 4 0x000B $arg1 ]; mapcomplete instalinkcapture

assassin				= [ start 5 0x0001 $arg1 ]; mapcomplete assassin
instaassassin			= [ start 5 0x0003 $arg1 ]; mapcomplete instaassassin

ctf						= [ start 6 0x0001 $arg1 ]; mapcomplete ctf
instactf				= [ start 6 0x0003 $arg1 ]; mapcomplete instactf

delta_game_0 			= [ weapon -1 $arg1 ]; setcomplete delta_game_0 off
delta_game_9 			= [ cameradir $arg1 ]; setcomplete delta_game_9 off

delta_edit_0			= [ editfacewentpush $arg1 1 ]; setcomplete delta_edit_0 off // Fill and Empty cube
delta_edit_1			= [ gridpower (+ $arg1 $gridpower) ]; setcomplete delta_edit_1 off
delta_edit_2			= [ editfacewentpush $arg1 0 ]; setcomplete delta_edit_2 off // push face/corners selected
delta_edit_3			= [ editfacewentpush $arg1 2 ]; setcomplete delta_edit_3 off // push corner pointed at by cursor
delta_edit_4			= [ editrotate $arg1 ]; setcomplete delta_edit_4 off // rotate 90 degrees
delta_edit_5			= [ entproperty 0 $arg1 ]; setcomplete delta_edit_5 off  // and the others
delta_edit_6			= [ edittex $arg1 ]; setcomplete delta_edit_6 off // change textures
delta_edit_9			= [ selectbrush $arg1 ]; setcomplete delta_edit_9 off // change heightmap brushes
delta_edit_10			= [ entautoview $arg1 ]; setcomplete delta_edit_10 off
delta_edit_11			= [ entproperty 0 $arg1 ]; setcomplete delta_edit_11 off
delta_edit_12			= [ entproperty 1 $arg1 ]; setcomplete delta_edit_12 off
delta_edit_13			= [ entproperty 2 $arg1 ]; setcomplete delta_edit_13 off
delta_edit_14			= [ entproperty 3 $arg1 ]; setcomplete delta_edit_14 off

cm = 0; setcomplete cm off
alias cameramode [
	if (= $cm 0) [
		spectator 1; cameradir 1; cameracycle 10; cm = 1;
	] [
		spectator 0; cameradir 0; cameracycle 10; cm = 0;
	]
]

zooming = 0
zoomsize = 10
zoomhair = 500
zoomsens = 4

zoomcrosshairsize = $crosshairsize
zoomsensitivityscale = $sensitivityscale
zoomfov = $fov
zoomhudgun = $hudgun

alias zoomer [
	changed = 0
	chamt = (div (- $zoomhair $zoomcrosshairsize) 10)
	fvmax = 120; //if (= $thirdperson 1) [ fvmax = 100 ]
	fvmin = 90; if (= (gunselect) 5) [ fvmin = $zoomsize ]
	fvamt = (div (- $zoomfov $fvmin) 10)

	if (= $zooming 1) [
		if (> $zoomhair $crosshairsize) [
			i = (+ $crosshairsize $chamt)
			if (< $i 1000) [ crosshairsize $i ] [ crosshairsize 1000 ]
			if (< $zoomhair $crosshairsize) [ crosshairsize $zoomhair ] [ changed = 1 ]
		]
		if (< $fvmin $fov) [
			i = (- $fov $fvamt)
			if (> $i 10) [ fov $i ] [ fov 10 ]
			if (> $fvmin $fov) [ fov $fvmin ] [ changed = 1 ]
		]
		if (= $changed 1) [ sleep 10 [ zoomer ] ]
	] [
	if (= $zooming 2) [ 
		if (< $zoomcrosshairsize $crosshairsize) [
			i = (- $crosshairsize $chamt)
			if (> $i 0) [ crosshairsize $i ] [ crosshairsize 1 ]
			if (> $zoomcrosshairsize $crosshairsize) [ crosshairsize $zoomcrosshairsize ] [ changed = 1 ]
		]
		if (> $zoomfov $fov) [
			i = (+ $fov $fvamt)
			if (< $i $fvmax) [ fov $i ] [ fov $fvmax ]
			if (< $zoomfov $fov) [ fov $zoomfov ] [ changed = 1 ]
		]
		if (= $changed 1) [
			sleep 10 [ zoomer ]
		] [
			hudgun $zoomhudgun
			sensitivityscale $zoomsensitivityscale
			zooming = 0
		]
	] ]
]

alias zoom [
	if (= $zooming 0) [
		zoomcrosshairsize = $crosshairsize
		zoomsensitivityscale = $sensitivityscale
		zoomfov = $fov
		zoomhudgun = $hudgun

		hudgun 0
		sensitivityscale $zoomsens
		zooming = 1
		zoomer
	]
	onrelease [
		if (= $zooming 1) [
			zooming = 2
			zoomer
		]
	]
]

bind W				[ forward ]
bind A				[ left ]
bind S				[ backward ]
bind D				[ right ]

bind UP				[ forward ]
bind DOWN			[ backward ]
bind RIGHT			[ right ]
bind LEFT			[ left ]

bind LSHIFT			[ crouch ]
bind SPACE			[ jump ]

bind MOUSE1			[ attack ]
bind MOUSE2 		[ zoom ]
bind MOUSE3			[ reload; pickup ]

bind I				[ taunt ]
bind E				[ use ]
bind F				[ use ] // secondary just in case people prefer it
bind R				[ reload ]
bind Q				[ lean ]

bind TAB			[ showscores ]

bind T				saycommand
bind BACKQUOTE		"saycommand /"
bind SLASH			"saycommand /"

bind KP_MINUS		[ conskip 1 ]
bind KP_PLUS		[ conskip -1000 ]

bind HOME			[ cameramode ]
bind END			[ if (= $cameracycle 0) [ cameracycle 10; ] [ cameracycle 0; ] ]
bind C				[ domodifier 9 ]

bind F1				[ if (= (gamemode) 1) [ edittoggle ] [ edit (mapname); sleep 5000 [ edittoggle ] ] ]
bind F9				[ setmaster 1; sleep 100 [ mastermode 1 ] ]
bindvar F10			grabmouse
bind F11			[ toggleconsole ]
bind F12			[ screenshot ]

editbind F3			[ cleargui; showentgui ]
editbind F2			[ showtexgui ]
editbind F3			[ calclight ]
editbind F4			[ calclight 3 ]
editbind F5			[ recalc ]
editbind F6			[ savemap ]

bind 1				[ weapon 0 ]
bind 2				[ weapon 1 ]
bind 3				[ weapon 2 ]
bind 4				[ weapon 3 ]
bind 5				[ weapon 4 ]
bind 6				[ weapon 5 ]
bind 7				[ weapon 6 ]
bindvar 9			thirdperson

editbind 1 			[ domodifier 11 ]
editbind 2 			[ domodifier 12 ]
editbind 3 			[ domodifier 13 ]
editbind 4 			[ domodifier 14 ]
editbindvar 6		entselsnap
editbind "7"		[ outline (at $outlinecolours $outlinestatus); if (= $outline 0) [sleep 1 [outlinestatus = 0]; echo "outline 0"] [echo (concat outline (+ $outlinestatus 1))]; outlinestatus = (+ $outlinestatus 1) ]
editbindvar 8		wireframe
editbindvar 9		bypassheightmapcheck
editbindvar 0		allfaces

bind KP_DIVIDE		[ togglesound ]
bind KP_MINUS		[ conskip 1 ]
bind KP_PLUS		[ conskip -1000 ]

editbind INSERT 	[ sendmap ]
editbind DELETE		[ getmap ]

bind MOUSE4			[ universaldelta 1 ]	// also used for editing, see below
bind MOUSE5			[ universaldelta -1 ]

editbind SPACE  	[ cancelsel ]
editbind MOUSE1		[ editdrag ]
editbind MOUSE3		[ selcorners ]
editbind MOUSE2		[ editextend ]

editbind N       	[ entselect insel ]
editbind M       	[ selentfindall ]

editbind LSHIFT		[ floatspeed 1000; onrelease [ floatspeed 100 ] ]
editbindmod LCTRL	passthrough
editbindmod LALT	hmapedit

do [brush_2] //421

editbind L			[ entlink ]
editbind X			[ editflip ]
editbind C			[ editcopy ]
editbind V			[ editpaste ]
editbind U			[ editcut ]
editbind Z			[ undo; passthroughsel 0 ]
editbind I			[ redo ]
editbind H			[ if $hmapedit [ editface 1 -1 ] [ hmapedit 1 ] ]
editbind BACKSPACE	[ editdel ]

editbind G			[ domodifier 1 ] // domodifier 1 -> executes delta_edit_1
editbind F			[ domodifier 2 ] // etc...
editbind Q			[ domodifier 3 ]
editbind R			[ domodifier 4 ] 
editbind Y			[ domodifier 6 ]
editbind J 			[ domodifier 9; brushcopy = 0; ]
editbind COMMA  	[ domodifier 10; onrelease entautoview ]

editbind PERIOD		selentedit

editbind P 			[ showentdir (= $showentdir 0); showentradius (= $showentradius 0) ]
editbindvar B		fullbright

editbind KP1 		[ editmat air ]
editbind KP2 		[ editmat clip ]
editbind KP3		[ editmat water ]
editbind KP4 		[ editmat glass ]
